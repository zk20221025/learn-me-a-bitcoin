# <center>公钥</center>
<center>一个由你的私钥生成的唯一数字。</center>

## 什么是公钥？
公钥是地址的早期形式。

就像私钥一样，公钥以大的十六进制值存储：

例子:
```
public_key  = 02b4632d08485ff1df2db55b9dafd23347d1c47a457072a1e87be26896549a8737
```

不管怎样，这里有一个有趣的部分：**你的公钥是由你的私钥生成的。**

>如果没有把这个公钥压缩成更短的格式（称为地址），那么这将是你发送比特币的“账号”。

## 如何从私钥获取公钥？
你将私钥插入特殊的数学函数中，它就会给你一个公钥。

### 这是什么函数？
它被称为**椭圆曲线乘法**，基本上涉及“在椭圆曲线图形上反复弹跳”，直到你最终到达图形上的最终坐标。这个最终坐标的数字就是你的公钥。

如果我给你演示一下，会更容易理解...

### 一个椭圆曲线长什么样？
就像这样：

![public_keys-1.png](img/public_keys-1%20(1).png)  

华丽的。

此外，比特币中使用的椭圆曲线具有特定的起始点。  

![public_keys-2.png](img/public_keys-2%20(1).png)  

如果对这条曲线进行一些基本的“乘法”操作（例如将起始点乘以2），会像这样在曲线上移动。  

![public_keys-3.png](img/public_keys-3%20(1).png)  

可以在曲线上的任何地方画出一条切线，并且它将与曲线上的另一点相交，这是椭圆曲线的一个特殊特征。

于是我们就得到它了。我们刚刚将初始坐标（G）“乘”2，并找到了最终坐标（2G）的位置。

这就是一轮椭圆曲线乘法。
>我一直将“乘法”放在引号内，因为它不是你所知道的标准乘法。  
**如果你将G的坐标乘以2，它不会给你2G的坐标（如图所示）。**  
你看，发现你可以以这种方式在曲线上移动的天才们不得不给它起个名字，所以他们决定将其称为“乘法”。  
因为你知道，数学永远不能够足够令人困惑。  
>>从现在开始，当我说“乘法”时，我指的是“椭圆曲线乘法”。

## 如何获取公钥？
在上面的例子中将G乘以2得到2G。

要获得公钥，需要将G乘以**私钥**。  
例子：
```
private_key = ef235aacf90d9f4aadd8c92e4b2562e1d9eb97f0df9ba3b508258739cb013db2
private_key = 108165236279178312660610114131826512483935470542850824183737259708197206310322

public_key  = 108165236279178312660610114131826512483935470542850824183737259708197206310322 * G
```
或者换句话说，“在椭圆曲线**私钥**上反复跳跃。”  

![public_keys-4.png](img/public_keys-4%20(1).png)  

你懂的。

椭圆曲线上的最终停止点将给出一组坐标，这些坐标形成你的公钥。

因此，如果这些是通过私钥乘以G得到的坐标：  
例子：
```
x = 81591541406288143274758265124625798440200740391102527151086648448953253267255
y = 64573953342291915951744135406509773051817879333910826118626860448948679381492
```

那么之后就是将它们都转换为十六进制并将它们拼接在一起。  
例子：
```
public_key (x) = b4632d08485ff1df2db55b9dafd23347d1c47a457072a1e87be26896549a8737
public_key (y) = 8ec38ff91d43e8c2092ebda601780485263da089465619e0358a5c1be7ac91f4

public_key (x,y) = b4632d08485ff1df2db55b9dafd23347d1c47a457072a1e87be26896549a87378ec38ff91d43e8c2092ebda601780485263da089465619e0358a5c1be7ac91f4
```

>这是公钥的原始格式，意味着我必须在开头加上04。像这样：

例子
```
public_key = 04b4632d08485ff1df2db55b9dafd23347d1c47a457072a1e87be26896549a87378ec38ff91d43e8c2092ebda601780485263da089465619e0358a5c1be7ac91f4
```
>要了解为什么会这样做，恐怕你需要阅读有关压缩公钥的部分...

### 压缩公钥
为了节省空间，公钥（现在）仅使用完整的x坐标。

这是因为椭圆曲线是一个方程（y^2 = x^3 + 7），这意味着如果你有x坐标，仍然可以计算出相应的y坐标。

然而，由于方程中的y^2部分，y可以是正数或负数：

![public_keys-5.png](img/public_keys-5%20(1).png)

因此，你找到正确的y坐标所需的唯一额外信息是知道y坐标是在x轴上方还是下方。由于椭圆曲线的工作方式：

* 如果y是偶数，则在x轴上方。
* 如果y是奇数，则在x轴下方。  

因此，你不必存储公钥的x和y，只需存储x和y是否为偶数或奇数。

在比特币中，偶数或奇数部分由数字前缀表示。

* 偶数= 02
* 奇数= 03  

![public_keys-6.png](img/public_keys-6%20(1).png)

因此，原始公钥将以04开头，而压缩公钥将以02或03开头：  
例子
```
public_key            = 04b4632d08485ff1df2db55b9dafd23347d1c47a457072a1e87be26896549a87378ec38ff91d43e8c2092ebda601780485263da089465619e0358a5c1be7ac91f4
public_key_compressed = 02b4632d08485ff1df2db55b9dafd23347d1c47a457072a1e87be26896549a8737
```
更短。

这是为了尽可能减少文本而付出了很多努力，因为公钥在交易数据中使用，随着时间的推移，它确实可以节省[区块链](../../../How%20Bitcoin%20Works/2.Mining/1.Blockchain/Blockchain.md)中的很多空间。

## 为什么我们使用椭圆曲线乘法来生成公钥？
椭圆曲线具有两个有用的特性，可用于创建私钥/公钥对。

1. **椭圆曲线乘法是一个“陷门函数”**。换句话说，你不能反向操作（即“除以”公钥的坐标）来找出私钥是什么。
>陷门函数是一种在一个方向上容易计算，但在相反方向上（找到它的反函数）却很难计算的函数，这需要特殊信息，称为“陷门”。

2. 尽管如此，**在数学上，公钥仍然与私钥相连**。因此，可以在不公开私钥的情况下证明这种连接（需要更多的数学理论）。  

因此，如果我给你我的公钥（或地址），我可以向你证明我“拥有”它，而无需向你展示我的私钥。  

当我想进行比特币交易时，这种能力尤其方便，这涉及将我的公钥放入交易数据中，并证明我是其所有者，而无需将我的私钥也放入交易数据中。  

公钥是从私钥创建的唯一数字。因此，当我说“证明我拥有”公钥时，我指的是“展示我知道创建公钥的私钥的数字”。  

### 你如何证明你拥有公钥？
>这是一个完整的话题（或两个）。但鉴于这是一个非常恼人的相关问题，我会尽力涵盖基础知识。

如上所述，我的私钥和公钥之间存在数学联系。

因此：

1. 我可以将我的**私钥**通过一些椭圆曲线数学运算得到一个**新值**。
2. 我可以将我的**公钥**通过一些其他椭圆曲线数学运算得到**另一个新值**。

![public_keys-7.png](img/public_keys-7%20(1).png)  

现在，这些新值会有一些小重叠。  

![public_keys-8.png](img/public_keys-8%20(1).png)  

我可以从我的私钥创建的新价值被称为数字签名。

而且…

>**重叠证明了公钥和私钥之间存在数学联系。**

而且因为没有私钥，没有人能够重新创建这个数字签名，所以我的数字签名足以证明我“拥有”公钥。

因此，我可以用数字签名向你展示我拥有的公钥，你永远不需要看到我的私钥。

## 结论。
椭圆曲线，万岁。